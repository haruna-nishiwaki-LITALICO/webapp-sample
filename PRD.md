## **製品要求仕様書（PRD）: テスト練習用Webアプリ「QA Practice App」**

### 1. はじめに

#### 1.1. 目的
本文書は、QAエンジニアが手動テスト技法および自動テストのスキルを向上させることを目的とした、テスト対象Webアプリケーション「QA Practice App」の製品要求仕様を定義するものである。

#### 1.2. 対象読者
このPRDは、本アプリケーションの開発者、および利用を想定しているQAエンジニアを対象とする。

#### 1.3. スコープ
このプロジェクトのスコープは、ローカル環境で動作する簡易的な商品在庫管理Webアプリケーションの開発に限定される。複雑なインフラ設定や外部サービス連携はスコープ外とする。

---

### 2. 製品概要

#### 2.1. プロダクトビジョン
「QA Practice App」は、QAエンジニアが様々なテスト技法（同値分割、境界値分析、デシジョンテーブル、状態遷移テストなど）を実践的に学ぶための「テストの練習台」となるアプリケーションである。意図的に作り込まれた不具合やテストしがいのある仕様を通じて、品質保証のスキルセットを体系的に習得できる環境を提供する。

#### 2.2. ターゲットユーザー（ペルソナ）
* **氏名:** 佐藤 愛（Sato Ai）
* **職種:** QAエンジニア（経験2年目）
* **スキル:**
    * 基本的なテスト設計（同値分割、境界値分析）の知識はある。
    * SeleniumやPlaywrightを使ったE2Eテスト自動化を学び始めたばかり。
    * APIテストの経験はまだない。
* **課題とニーズ:**
    * 「理論は学んだが、どのテスト技法をどう使えばいいか実践の場が欲しい」
    * 「テスト自動化の練習をしたいが、手頃なWebサイトがない」
    * 「バグを見つける勘所を養いたい」

---

### 3. 設計と実装に関する考慮事項

#### 3.1. 技術スタック（推奨）
* **言語:** Python, JavaScript のいずれか（実装者が得意なもの）
* **フレームワーク:** Flask, Django, FastAPI (Python) または React, Vue.js (JavaScript) のいずれか（実装者が得意なもの）
* **データベース:** SQLite
* **実行方法:** 単一のコマンド（例: `python app.py`）でアプリケーションが起動できること。

#### 3.2. アーキテクチャ
* サーバーサイドレンダリング（SSR）またはクライアントサイドレンダリング（CSR）のどちらでも可。
* データベースファイル（`database.db`など）はプロジェクトルートに配置し、簡単に初期化・削除できること。

---

### 4. 機能要件

アプリケーションは、基本的なCRUD操作を備えた「商品在庫管理システム」とする。

#### 4.1. ユーザーログイン機能
* **役割（Role）:** `admin`（管理者）と`user`（一般ユーザー）の2種類が存在する。
* **認証:** 以下の固定アカウントでログインできる。
    * ID: `admin`, PW: `admin_password`
    * ID: `user`, PW: `user_password`
* **認可:**
    * `admin`は全ての商品に対するCRUD操作が可能。
    * `user`は商品の閲覧（R）と編集（U）のみ可能。削除（D）はできない。

> **🎯 テスト観点:** ログイン機能テスト、権限テスト、セキュリティテスト（SQLインジェクションなど）

#### 4.2. 商品一覧・検索機能
* 登録されている商品が一覧で表示される。
* 一覧には「商品ID」「商品名」「カテゴリ」「価格」「在庫数」「ステータス」が表示される。
* 複数の条件（キーワード、カテゴリ、価格帯）で商品を検索できる。

> **🎯 テスト観点:** ペアワイズ法、複数条件の組み合わせテスト、表示崩れのテスト

#### 4.3. 商品登録・編集機能（CRUD）
* **入力項目:**
    * **商品名:** 文字列。必須入力。
    * **カテゴリ:** ドロップダウンリストから選択（「書籍」「家電」「食品」「その他」）。
    * **価格:** 数値。必須入力。
    * **在庫数:** 整数。必須入力。
    * **商品説明:** テキストエリア。任意入力。
    * **ステータス:** ラジオボタンで選択（「準備中」「公開中」「非公開」）。

> **🎯 テスト観点:** CRUD操作の基本テスト、UIテスト、E2Eテスト自動化

#### 4.4. 【テスト技法練習用】特別仕様
以下の仕様を意図的に実装し、各種テスト技法の練習台とする。

##### 4.4.1. 入力値バリデーション
* **商品名:** 1文字以上、50文字以下。
* **価格:** 0円以上、1,000,000円以下。**数値のみ**入力可能。
* **在庫数:** 0個以上、999個以下。**整数のみ**入力可能。

> **🎯 テスト観点:** **同値分割法**、**境界値分析**（例: 価格に-1, 0, 1, 1000000, 1000001を入力）

##### 4.4.2. 在庫ステータス表示
商品一覧画面の「在庫数」に応じて、背景色が動的に変化する。
* 在庫数 = 0: 「在庫切れ」と表示され、行の背景色が**赤色**になる。
* 1 <= 在庫数 <= 10: 「残りわずか」と表示され、行の背景色が**黄色**になる。
* 在庫数 > 10: 「在庫あり」と表示される（背景色なし）。

> **🎯 テスト観点:** **デシジョンテーブルテスト**（条件: 在庫数、アクション: 表示文言・背景色）

##### 4.4.3. 商品ステータスの遷移
商品のステータスは、以下のルールでのみ遷移できる。
* 
* **新規登録時:** 「準備中」
* **「準備中」から:** 「公開中」または「非公開」に遷移可能。
* **「公開中」から:** 「非公開」にのみ遷移可能。
* **「非公開」から:** 「公開中」にのみ遷移可能。

> **🎯 テスト観点:** **状態遷移テスト**（不正な状態遷移が行えないことを確認）

##### 4.4.4. 意図的な不具合（イースターエッグ）
* **検索キーワード**に `バグ票` と入力して検索すると、500エラー（Internal Server Error）が発生する。
* **商品説明**に特定のHTMLタグ（例: `<script>alert('XSS')</script>`）がエスケープされずに保存され、簡易的なXSS（クロスサイトスクリプティング）が成立する。
* **商品削除ボタン**に確認ダイアログがなく、クリックすると即座に削除される。

> **🎯 テスト観点:** **エラー推測テスト**、セキュリティテスト

---

### 5. 非機能要件

#### 5.1. 実行環境
* 特別なWebサーバー（Apache, Nginxなど）のインストールは不要。
* OSに依存しない（Windows, macOS, Linuxで動作すること）。

#### 5.2. パフォーマンス
* 練習用アプリケーションのため、厳格なパフォーマンステストは要求しない。ただし、常識的な範囲（例: 3秒以内）で画面が表示されること。

#### 5.3. ユーザビリティ
* **テスト自動化への配慮:**
    * 全ての主要なHTML要素（入力フォーム、ボタンなど）には、一意の`id`または`data-testid`属性を付与する。
* **シンプルさ:**
    * デザインは最小限でよく、機能が直感的に理解できることを優先する。

---

### 6. 将来の展望
* CRUD操作が可能なREST APIエンドポイントの追加（APIテスト練習用）。
* 意図的にレスポンスが遅いAPIエンドポイントの追加（パフォーマンステスト練習用）。
* CSVファイルによる商品データの一括インポート・エクスポート機能の追加。